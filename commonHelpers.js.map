{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function getPicturesByQuery({\n  query = '',\n  page = 1,\n  per_page = 15,\n} = {}) {\n  const apiKey = '44869216-4addd85d29d39c45ae242764b'; // Ваш API ключ\n  const FullURL = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  return axios\n    .get(FullURL, { params: { page, per_page } })\n    .then(({ data }) => data);\n}\n\n\n\n// import { formInput, showLoader } from '../main';\n\n// export function getPicturesByQuery() {\n//   const query = formInput.value;\n//   console.log(query);\n//   const API_KEY = '44869216-4addd85d29d39c45ae242764b';\n//   return fetch(\n//     `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n//   ).then(res => {\n    \n//     console.log(res);\n\n   \n//     if (!res.ok) {\n//       throw new Error(res.status); \n//     }\n\n   \n//     return res.json();\n//   });\n","export function showImages(arr) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\"\n        href=\"${largeImageURL}\"> \n        <img class=\"gallery-image\"\n        src=\"${webformatURL}\" \n        alt=\"${tags}  \n        width=\"360\" \n        height=\"200\"\"/>\n        </a>\n        <ul class = \"gallery\">\n          <li>\n            <h3>likes</h3>\n            <p>${likes}</p>\n          </li>\n          <li>\n            <h3>views</h3>\n            <p>${views}</p>\n          </li>\n          <li>\n            <h3>comments</h3>\n            <p>${comments}</p>\n          </li>\n          <li>\n            <h3>downloads</h3>\n            <p>${downloads}</p>\n          </li>\n        </ul>\n      \n      </li>`;\n      }\n    )\n    .join('');\n  \n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getPicturesByQuery } from './js/pixabay-api';\nimport { showImages } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst preloader = document.querySelector('.loader-wrap');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst params = {\n  query: '',\n  page: 1,\n  per_page: 15,\n  max_page: 0,\n};\n\nsearchForm.addEventListener('submit', handlerSubmit);\n\nasync function handlerSubmit(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  params.page = 1;\n  params.query = searchForm.elements.input.value.trim();\n  loadMoreBtn.style.display = 'none';\n  loadMoreBtn.removeEventListener('click', handlerLoadMore);\n\n  if (!params.query) {\n    iziToast.warning({\n      title: 'Caution',\n      titleColor: 'white',\n      titleSize: '16px',\n      message: 'Please, fill out the field!',\n      messageColor: 'white',\n      messageSize: '16px',\n      position: 'topRight',\n      backgroundColor: 'rgba(255, 160, 0, 0.6)',\n      close: false,\n      closeOnClick: true,\n    });\n    searchForm.reset();\n    return;\n  }\n\n  preloader.style.display = 'flex';\n  try {\n    const picture = await getPicturesByQuery(params);\n    \n    if (picture.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        titleColor: 'white',\n        titleSize: '16px',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'white',\n        messageSize: '16px',\n        position: 'bottomRight',\n        backgroundColor: 'rgba(239, 64, 64, 0.6)',\n        close: false,\n        closeOnClick: true,\n      });\n    } else {\n      params.max_page = Math.ceil(picture.totalHits / params.per_page);\n      \n      if (params.max_page > 1) {\n        loadMoreBtn.style.display = 'block';\n        loadMoreBtn.addEventListener('click', handlerLoadMore);\n      } else {\n        loadMoreBtn.style.display = 'none';\n        iziToast.warning({\n          title: 'Caution',\n          titleColor: 'white',\n          titleSize: '16px',\n          message: 'We are sorry, but you have reached the end of search results.',\n          messageColor: 'white',\n          messageSize: '16px',\n          position: 'bottomCenter',\n          backgroundColor: 'rgba(70, 130, 180, 0.8)',\n          close: false,\n          closeOnClick: true,\n          timeout: 6000,\n        });\n      }\n      \n      gallery.innerHTML = showImages(picture.hits);\n      lightbox.refresh();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'white',\n      titleSize: '16px',\n      message: `Ups... Something went wrong. Error: ${error}`,\n      messageColor: 'white',\n      messageSize: '16px',\n      position: 'bottomRight',\n      backgroundColor: 'rgba(239, 64, 64, 0.6)',\n      close: false,\n      closeOnClick: true,\n    });\n  } finally {\n    searchForm.reset();\n    preloader.style.display = 'none';\n  }\n}\n\nasync function handlerLoadMore() {\n  params.page += 1;\n  preloader.style.display = 'flex';\n  loadMoreBtn.style.display = 'none';\n  \n  try {\n    const picture = await getPicturesByQuery(params);\n    gallery.insertAdjacentHTML('beforeend', showImages(picture.hits));\n    lightbox.refresh();\n\n    window.scrollBy({\n      top: gallery.lastElementChild.clientHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'white',\n      titleSize: '16px',\n      message: `Ups... Something went wrong. Error: ${error}`,\n      messageColor: 'white',\n      messageSize: '16px',\n      position: 'bottomRight',\n      backgroundColor: 'rgba(239, 64, 64, 0.6)',\n      close: false,\n      closeOnClick: true,\n    });\n  } finally {\n    preloader.style.display = 'none';\n    \n    if (params.page === params.max_page) {\n      loadMoreBtn.style.display = 'none';\n      loadMoreBtn.removeEventListener('click', handlerLoadMore);\n      \n      iziToast.warning({\n        title: 'Caution',\n        titleColor: 'white',\n        titleSize: '16px',\n        message: 'We are sorry, but you have reached the end of search results.',\n        messageColor: 'white',\n        messageSize: '16px',\n        position: 'bottomCenter',\n        backgroundColor: 'rgba(70, 130, 180, 0.8)',\n        close: false,\n        closeOnClick: true,\n        timeout: 6000,\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  }\n}\n"],"names":["getPicturesByQuery","query","page","per_page","FullURL","axios","data","showImages","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","gallery","preloader","loadMoreBtn","lightbox","SimpleLightbox","params","handlerSubmit","event","handlerLoadMore","iziToast","picture","error"],"mappings":"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"}
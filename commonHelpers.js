import{a as w,S as C,i as l}from"./assets/vendor-ee72e1a4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}})();function y({query:r="",page:t=1,per_page:a=15}={}){const n=`https://pixabay.com/api/?key=44869216-4addd85d29d39c45ae242764b=${r}&image_type=photo&orientation=horizontal&safesearch=true`;return w.get(n,{params:{query:r,page:t,per_page:a}}).then(({data:e})=>e)}function f(r){return images.map(({webformatURL:t,largeImageURL:a,tags:n,likes:e,views:o,comments:c,downloads:x})=>{}).join("")}const u="/goit-js-hw-12/assets/caution-97cabe64.svg",p="/goit-js-hw-12/assets/error-5a3c68bc.svg",d=document.querySelector(".form"),m=document.querySelector(".gallery"),g=document.querySelector(".loader-wrap"),i=document.querySelector(".load-more-btn"),b=new C(".gallery a",{captionsData:"alt",captionDelay:250}),s={query:"",page:1,per_page:15,max_page:0};d.addEventListener("submit",S);async function S(r){if(r.preventDefault(),m.innerHTML="",s.page=1,i.style.display="none",i.removeEventListener("click",h),!s.query){l.warning({title:"Caution",titleColor:"white",titleSize:"16px",message:"Please, fill out the field!",messageColor:"white",messageSize:"16px",position:"topRight",backgroundColor:"rgba(255, 160, 0, 0.6)",iconUrl:u,close:!1,closeOnClick:!0}),d.reset();return}g.style.display="flex";try{const t=await y(s);t.hits.length===0?l.error({title:"Error",titleColor:"white",titleSize:"16px",message:"Sorry, there are no images matching your search query. Please try again!",messageColor:"white",messageSize:"16px",position:"bottomRight",backgroundColor:"rgba(239, 64, 64, 0.6)",iconUrl:p,close:!1,closeOnClick:!0}):(s.max_page=Math.ceil(t.totalHits/s.per_page),s.max_page>1?(i.style.display="block",i.addEventListener("click",h)):(i.style.display="none",l.warning({title:"Caution",titleColor:"white",titleSize:"16px",message:"We are sorry, but you have reached the end of search results.",messageColor:"white",messageSize:"16px",position:"bottomCenter",backgroundColor:"rgba(70, 130, 180, 0.8)",iconUrl:u,close:!1,closeOnClick:!0,timeout:6e3})),m.innerHTML=f(t.hits),b.refresh())}catch(t){l.error({title:"Error",titleColor:"white",titleSize:"16px",message:`Ups... Someting went wrong. Error: ${t}`,messageColor:"white",messageSize:"16px",position:"bottomRight",backgroundColor:"rgba(239, 64, 64, 0.6)",iconUrl:p,close:!1,closeOnClick:!0})}finally{d.reset(),g.style.display="none"}}async function h(){s.page+=1,g.style.display="flex",i.style.display="none";try{const r=await y(s);m.insertAdjacentHTML("beforeend",f(r.hits)),b.refresh();//! плавний скролл
const a=document.querySelector(".gallery-item").getBoundingClientRect().height;window.scrollBy({top:a*2,behavior:"smooth"})}catch(r){l.error({title:"Error",titleColor:"white",titleSize:"16px",message:`Ups... Someting went wrong. Error: ${r}`,messageColor:"white",messageSize:"16px",position:"bottomRight",backgroundColor:"rgba(239, 64, 64, 0.6)",iconUrl:p,close:!1,closeOnClick:!0})}finally{g.style.display="none",s.page===s.max_page?(i.style.display="none",i.removeEventListener("click",h),l.warning({title:"Caution",titleColor:"white",titleSize:"16px",message:"We are sorry, but you have reached the end of search results.",messageColor:"white",messageSize:"16px",position:"bottomCenter",backgroundColor:"rgba(70, 130, 180, 0.8)",iconUrl:u,close:!1,closeOnClick:!0,timeout:6e3})):i.style.display="block"}}
//# sourceMappingURL=commonHelpers.js.map
